AWSTemplateFormatVersion: 2010-09-09
Description: Create a distribution in cloudfront for bypassj2.link

Parameters:
  DomainName:
    Type: String
    Default: jimmydevops.link

Resources:

  oaiUser:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: 'OAI user for bypass s3 website'

  cloudfrontdistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        Comment: cloudfront distribution for bypassj2
        Origin:
          DomainName: !Join ['.',!Ref DomainName, 's3.ap-southeast-2.amazonaws.com']
          Id: !Join ['.',!Ref DomainName, 's3.ap-southeast-2.amazonaws.com']
          S3OriginConfig:
            OriginAccessIdentity:  E9XB5I38ZIJPU

        DefaultCacheBehavior:
          Compress: true
          TargetOriginId: 
          ViewerProtocolPolicy: 
        Enabled: 